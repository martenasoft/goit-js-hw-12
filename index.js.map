{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst apiKey = \"48580405-254aeb3d0592dc0b65db12949\";\nconst perPage = 20; // Количество изображений на странице\nlet currentPage = 1;\nlet currentQuery = \"\";\n\nexport async function fetchImages(query, renderGallery) {\n  if (query !== currentQuery) {\n    currentPage = 1;\n    currentQuery = query;\n  }\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: apiKey,\n        q: query,\n        min_width: 360,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: perPage,\n        page: currentPage,\n      },\n    });\n\n\n    const data = response.data;\n\n    if (data.hits.length === 0 && currentPage === 1) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    renderGallery(data.hits, currentPage, perPage,  data.total);\n  } catch (error) {\n    console.log(error)\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n}\n\nexport function loadMore(renderGallery) {\n  currentPage++;\n  fetchImages(currentQuery, renderGallery);\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.css\";\n\nexport default function renderGallery(images, currentPage, perPage, total) {\n  const gallery = document.getElementById(\"gallery\");\n  let item = '';\n  images.forEach(image => {\n\n    item += `<li class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\" >\n                  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-source=\"${image.largeImageURL}\">\n                </a>\n                <ul class=\"gallery-info\">\n                    <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Likes</p>\n                        <p class=\"gallery-item-value\">${image.likes}</p>\n                    </li>\n                    <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Views</p>\n                        <p class=\"gallery-item-value\">${image.views}</p>\n                    </li>\n                      <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Comments</p>\n                        <p class=\"gallery-item-value\">${image.comments}</p>\n                    </li>\n                      <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Downloads</p>\n                        <p class=\"gallery-item-value\">${image.downloads}</p>\n                    </li>\n                </ul>\n\n            </li>`;\n  });\n\n  const loadMoreButton = document.getElementById(\"loadMore\");\n\n  const loader = document.getElementById(\"loader\");\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'block';\n  setTimeout(() => {\n    gallery.innerHTML += item;\n\n    const lightbox = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    if ((perPage * currentPage) < total ) {\n      loadMoreButton.style.display = 'block';\n    }\n\n    loader.style.display = 'none';\n\n  }, 1000);\n\n\n}","import {fetchImages, loadMore} from './js/pixabay-api.js'\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport renderGallery from './js/render-functions.js'\n\nconst form = document.getElementById(\"searchForm\");\n\nconst loadMoreButton = document.getElementById(\"loadMore\");\nform.addEventListener(\"submit\", async (event) => {\n\n  const searchQuery = document.getElementById(\"searchQuery\");\n  const submitButton = document.getElementById(\"submitButton\");\n  const gallery = document.getElementById(\"gallery\");\n\n  event.preventDefault();\n  const query = searchQuery.value.trim();\n\n  if (query) {\n    gallery.style.display = 'none';\n    submitButton.disabled = searchQuery.disabled = true;\n    await fetchImages(query, renderGallery);\n    submitButton.disabled = searchQuery.disabled = false;\n    gallery.style.display = 'flex';\n\n  }\n\n});\n\nloadMoreButton.addEventListener(\"click\", () => loadMore(renderGallery));\n\n\n"],"names":["apiKey","perPage","currentPage","currentQuery","fetchImages","query","renderGallery","data","axios","iziToast","error","loadMore","images","total","gallery","item","image","loadMoreButton","loader","SimpleLightbox","form","event","searchQuery","submitButton"],"mappings":"owBAGA,MAAMA,EAAS,qCACTC,EAAU,GAChB,IAAIC,EAAc,EACdC,EAAe,GAEZ,eAAeC,EAAYC,EAAOC,EAAe,CAClDD,IAAUF,IACZD,EAAc,EACdC,EAAeE,GAEjB,GAAI,CAeF,MAAME,GAdW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKR,EACL,EAAGK,EACH,UAAW,IACX,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUJ,EACV,KAAMC,CACP,CACP,CAAK,GAGqB,KAEtB,GAAIK,EAAK,KAAK,SAAW,GAAKL,IAAgB,EAAG,CAC/CO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACjB,CAAO,EACD,MACD,CACDH,EAAcC,EAAK,KAAML,EAAaD,EAAUM,EAAK,KAAK,CAC3D,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACF,CACH,CAEO,SAASE,EAASL,EAAe,CACtCJ,IACAE,EAAYD,EAAcG,CAAa,CACzC,CC/Ce,SAASA,EAAcM,EAAQV,EAAaD,EAASY,EAAO,CACzE,MAAMC,EAAU,SAAS,eAAe,SAAS,EACjD,IAAIC,EAAO,GACXH,EAAO,QAAQI,GAAS,CAEtBD,GAAQ;AAAA,2BACeC,EAAM,aAAa;AAAA,8BAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI,kBAAkBA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,wDAKjDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,wDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,kBAKvE,CAAG,EAED,MAAMC,EAAiB,SAAS,eAAe,UAAU,EAEnDC,EAAS,SAAS,eAAe,QAAQ,EAC/CD,EAAe,MAAM,QAAU,OAC/BC,EAAO,MAAM,QAAU,QACvB,WAAW,IAAM,CACfJ,EAAQ,WAAaC,EAEJ,IAAII,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GACpB,CAAK,EACIlB,EAAUC,EAAeW,IAC5BI,EAAe,MAAM,QAAU,SAGjCC,EAAO,MAAM,QAAU,MAExB,EAAE,GAAI,CAGT,CCnDA,MAAME,EAAO,SAAS,eAAe,YAAY,EAE3CH,EAAiB,SAAS,eAAe,UAAU,EACzDG,EAAK,iBAAiB,SAAU,MAAOC,GAAU,CAE/C,MAAMC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAe,SAAS,eAAe,cAAc,EACrDT,EAAU,SAAS,eAAe,SAAS,EAEjDO,EAAM,eAAc,EACpB,MAAMhB,EAAQiB,EAAY,MAAM,KAAI,EAEhCjB,IACFS,EAAQ,MAAM,QAAU,OACxBS,EAAa,SAAWD,EAAY,SAAW,GAC/C,MAAMlB,EAAYC,EAAOC,CAAa,EACtCiB,EAAa,SAAWD,EAAY,SAAW,GAC/CR,EAAQ,MAAM,QAAU,OAI5B,CAAC,EAEDG,EAAe,iBAAiB,QAAS,IAAMN,EAASL,CAAa,CAAC"}