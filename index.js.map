{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = \"48580405-254aeb3d0592dc0b65db12949\";\nconst perPage = 20; // Количество изображений на странице\nlet currentPage = 1;\n\n\nexport default async function fetchImages(query, isClear = false) {\n/*  if (query !== currentQuery) {\n    currentPage = 1;\n    currentQuery = query;\n    gallery.clear(false);\n  }\n\n  gallery\n    .loadMore(false)\n    .loaderLabel(false)\n  ;*/\n\n  if (isClear) {\n    currentPage = 1;\n  }\n\n\n  return await axios.get(\"https://pixabay.com/api/\", {\n    params: {\n      key: apiKey,\n      q: query,\n      min_width: 360,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: perPage,\n      page: currentPage,\n    },\n  }).then((response) => {\n    ++currentPage;\n    return {\n      response,\n      currentPage,\n      perPage\n    };\n  });\n/*\n  try {\n   // gallery.loaderLabel(true);\n\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: apiKey,\n        q: query,\n        min_width: 360,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: perPage,\n        page: currentPage,\n      },\n    });\n\n/!*    const data = response.data;\n\n    if (data.hits.length === 0 && currentPage === 1) {\n      gallery\n        .loaderLabel(false);\n\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      return;\n    }\n\n    gallery\n      .loaderLabel(false)\n      .loadMore((currentPage * perPage) < data.total)\n      .render(data.hits);*!/\n\n    currentPage++;\n\n  } catch (error) {\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }*/\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\n\nclass Gallery {\n\n  constructor(gallery, loader, loadMoreButton) {\n    this.gallery = gallery;\n    this.loader = loader;\n    this.loadMoreButton = loadMoreButton;\n  }\n\n  render(images) {\n\n    let item = '';\n    images.forEach((image) => {\n      item += this.template(image);\n    });\n\n    this.append(item);\n\n    const lightbox = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    return this;\n  }\n\n  scroll() {\n    const item = document.getElementsByClassName('gallery-info-item');\n    if (item[0] === undefined) {\n      return;\n    }\n    const rect = item[0].getBoundingClientRect();\n    window.scrollBy(0, rect.height * 2);\n  }\n\n  clear() {\n    this.gallery.innerHTML = '';\n    return this;\n  }\n\n  append(value) {\n    this.gallery.innerHTML += value;\n    return this;\n  }\n\n  loaderLabel(isShow = false) {\n    this.loader.style.display = isShow ? 'block' : 'none';\n    return this;\n  }\n  loadMore(isShow = false) {\n    this.loadMoreButton.style.display = isShow ? 'block' : 'none';\n    return this;\n  }\n\n  template(image) {\n    return `<li class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\" >\n                  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-source=\"${image.largeImageURL}\">\n                </a>\n                <ul class=\"gallery-info\">\n                    <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Likes</p>\n                        <p class=\"gallery-item-value\">${image.likes}</p>\n                    </li>\n                    <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Views</p>\n                        <p class=\"gallery-item-value\">${image.views}</p>\n                    </li>\n                      <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Comments</p>\n                        <p class=\"gallery-item-value\">${image.comments}</p>\n                    </li>\n                      <li class=\"gallery-info-item\">\n                        <p class=\"gallery-item-title\">Downloads</p>\n                        <p class=\"gallery-item-value\">${image.downloads}</p>\n                    </li>\n                </ul>\n\n            </li>`;\n  }\n}\n\n\nexport default Gallery;","import fetchImages from './js/pixabay-api.js'\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport Gallery from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\n\nconst form = document.getElementById(\"searchForm\");\nconst gallery =  new Gallery(\n  document.getElementById(\"gallery\"),\n  document.getElementById('loader'),\n  document.getElementById('loadMore')\n);\n\nlet currentQuery = '';\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  let query = document.getElementById(\"searchQuery\").value.trim();\n  let isClear = (query !== currentQuery);\n  if (isClear) {\n    currentQuery = query;\n    gallery.clear(false);\n  }\n\n  gallery\n    .loadMore(false)\n    .loaderLabel(false);\n\n  fetchImages(query, isClear)\n    .then((result) => {\n\n      gallery\n        .loaderLabel(false)\n        .loadMore((result.currentPage * result.perPage) < result.response.data.total)\n        .render(result.response.data.hits)\n        .scroll()\n      ;\n\n      if (result.response.data.total === 0 && isClear) {\n        gallery\n          .loaderLabel(false);\n\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n\n        return;\n      }\n\n    }).catch(error => {\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  });\n\n});\n"],"names":["apiKey","perPage","currentPage","fetchImages","query","isClear","axios","response","Gallery","gallery","loader","loadMoreButton","images","item","image","SimpleLightbox","rect","value","isShow","form","currentQuery","event","result","iziToast","error"],"mappings":"owBAEA,MAAMA,EAAS,qCACTC,EAAU,GAChB,IAAIC,EAAc,EAGH,eAAeC,EAAYC,EAAOC,EAAU,GAAO,CAYhE,OAAIA,IACFH,EAAc,GAIT,MAAMI,EAAM,IAAI,2BAA4B,CACjD,OAAQ,CACN,IAAKN,EACL,EAAGI,EACH,UAAW,IACX,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUH,EACV,KAAMC,CACP,CACL,CAAG,EAAE,KAAMK,IACP,EAAEL,EACK,CACL,SAAAK,EACA,YAAAL,EACA,QAAAD,CACN,EACG,CA8CH,CCrFA,MAAMO,CAAQ,CAEZ,YAAYC,EAASC,EAAQC,EAAgB,CAC3C,KAAK,QAAUF,EACf,KAAK,OAASC,EACd,KAAK,eAAiBC,CACvB,CAED,OAAOC,EAAQ,CAEb,IAAIC,EAAO,GACX,OAAAD,EAAO,QAASE,GAAU,CACxBD,GAAQ,KAAK,SAASC,CAAK,CACjC,CAAK,EAED,KAAK,OAAOD,CAAI,EAEC,IAAIE,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GACpB,CAAK,EAEM,IACR,CAED,QAAS,CACP,MAAMF,EAAO,SAAS,uBAAuB,mBAAmB,EAChE,GAAIA,EAAK,CAAC,IAAM,OACd,OAEF,MAAMG,EAAOH,EAAK,CAAC,EAAE,sBAAqB,EAC1C,OAAO,SAAS,EAAGG,EAAK,OAAS,CAAC,CACnC,CAED,OAAQ,CACN,YAAK,QAAQ,UAAY,GAClB,IACR,CAED,OAAOC,EAAO,CACZ,YAAK,QAAQ,WAAaA,EACnB,IACR,CAED,YAAYC,EAAS,GAAO,CAC1B,YAAK,OAAO,MAAM,QAAUA,EAAS,QAAU,OACxC,IACR,CACD,SAASA,EAAS,GAAO,CACvB,YAAK,eAAe,MAAM,QAAUA,EAAS,QAAU,OAChD,IACR,CAED,SAASJ,EAAO,CACd,MAAO;AAAA,2BACgBA,EAAM,aAAa;AAAA,8BAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI,kBAAkBA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,wDAKjDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,wDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,kBAKpE,CACH,CC5EA,MAAMK,EAAO,SAAS,eAAe,YAAY,EAC3CV,EAAW,IAAID,EACnB,SAAS,eAAe,SAAS,EACjC,SAAS,eAAe,QAAQ,EAChC,SAAS,eAAe,UAAU,CACpC,EAEA,IAAIY,EAAe,GAEnBD,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAC/CA,EAAM,eAAc,EACpB,IAAIjB,EAAQ,SAAS,eAAe,aAAa,EAAE,MAAM,OACrDC,EAAWD,IAAUgB,EACrBf,IACFe,EAAehB,EACfK,EAAQ,MAAM,EAAK,GAGrBA,EACG,SAAS,EAAK,EACd,YAAY,EAAK,EAEpBN,EAAYC,EAAOC,CAAO,EACvB,KAAMiB,GAAW,CAShB,GAPAb,EACG,YAAY,EAAK,EACjB,SAAUa,EAAO,YAAcA,EAAO,QAAWA,EAAO,SAAS,KAAK,KAAK,EAC3E,OAAOA,EAAO,SAAS,KAAK,IAAI,EAChC,OAAQ,EAGPA,EAAO,SAAS,KAAK,QAAU,GAAKjB,EAAS,CAC/CI,EACG,YAAY,EAAK,EAEpBc,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACnB,CAAS,EAED,MACD,CAEP,CAAK,EAAE,MAAMC,GAAS,CAElBD,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACL,CAAG,CAEH,CAAC"}